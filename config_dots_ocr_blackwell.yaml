# ОПТИМИЗИРОВАННАЯ КОНФИГУРАЦИЯ DOTS.OCR ДЛЯ RTX 5070 TI BLACKWELL

models:
  dots_ocr_blackwell:
    name: "dots.ocr (RTX 5070 Ti Optimized)"
    model_path: "rednote-hilab/dots.ocr"
    precision: "bf16"  # Оптимально для Blackwell Tensor Cores
    attn_implementation: "flash_attention_2"  # Теперь поддерживается с правильной версией
    use_flash_attention: true  # Включаем flash attention
    device_map: "auto"
    trust_remote_code: true
    
    # Специфичные настройки для RTX 5070 Ti
    gpu_memory_utilization: 0.9  # 90% от 16GB VRAM
    tensor_parallel_size: 1
    max_model_len: 4096
    
    # Оптимизации для Blackwell
    enable_tf32: true
    enable_cudnn_benchmark: true
    use_bfloat16: true

performance:
  blackwell_optimizations:
    enable_tf32: true
    enable_cudnn_benchmark: true
    use_bfloat16: true
    enable_flash_attention: true  # Теперь поддерживается
    gpu_memory_utilization: 0.9
    
gpu_requirements:
  rtx_5070_ti:
    compute_capability: "sm_120"
    cuda_version: "12.8"
    pytorch_version: "2.7.0"
    flash_attention_version: "2.8.0.post2"
    recommended_precision: "bf16"
    tensor_cores: "5th_gen"
    vram_gb: 16

# Настройки для vLLM (рекомендуемый способ запуска)
vllm:
  gpu_memory_utilization: 0.95
  tensor_parallel_size: 1
  max_model_len: 4096
  trust_remote_code: true
  async_scheduling: true
