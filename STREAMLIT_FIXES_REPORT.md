# –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –æ—à–∏–±–æ–∫ Streamlit

## üêõ –ü—Ä–æ–±–ª–µ–º—ã –≤ –ª–æ–≥–∞—Ö:

### 1. –û—à–∏–±–∫–∞ Session State
```
AttributeError: st.session_state has no attribute "ocr_result". 
Did you forget to initialize it?
```

### 2. –û—à–∏–±–∫–∞ dots.ocr
```
2026-01-17 19:28:27 - ERROR - Error: cannot access local variable 'torch' 
where it is not associated with a value
```

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Session State

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ `st.session_state.ocr_result`

**–†–µ—à–µ–Ω–∏–µ:**
```python
# –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
def get_session_state(key, default=None):
    """–ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ session_state."""
    return getattr(st.session_state, key, default)

# –û–±–Ω–æ–≤–ª–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
if get_session_state('ocr_result'):
    result = get_session_state('ocr_result')
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ Session state —Ç–µ–ø–µ—Ä—å –±–µ–∑–æ–ø–∞—Å–µ–Ω –æ—Ç –æ—à–∏–±–æ–∫

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –º–æ–¥–µ–ª—å dots.ocr

**–ü—Ä–æ–±–ª–µ–º–∞:** –û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ torch –≤ fallback –∫–æ–¥–µ

**–†–µ—à–µ–Ω–∏–µ:**
```python
# torch —É–∂–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –≤ –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞
# –£–±—Ä–∞–Ω –ø–æ–≤—Ç–æ—Ä–Ω—ã–π import torch –≤ fallback –∫–æ–¥–µ
# –î–æ–±–∞–≤–ª–µ–Ω–∞ –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ, –Ω–æ –º–æ–¥–µ–ª—å –≤—Å–µ –µ—â–µ –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–∞

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- dots.ocr: ‚ö†Ô∏è ‚Üí ‚ùå (–Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞)
- –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏: 14.9—Å ‚Üí 46.47—Å (–º–µ–¥–ª–µ–Ω–Ω–µ–µ)
- –°—Ç–∞—Ç—É—Å: "–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏" ‚Üí "–ù–µ—Å—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞"

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|--------|----------|
| **Session State** | ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û | –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º |
| **dots.ocr** | ‚ùå –ü–†–û–ë–õ–ï–ú–´ | –í—Å–µ –µ—â–µ –æ—à–∏–±–∫–∞ "'NoneType' object has no attribute 'shape'" |
| **Streamlit App** | ‚úÖ –†–ê–ë–û–¢–ê–ï–¢ | –ó–∞–ø—É—â–µ–Ω –Ω–∞ http://localhost:8503 |

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

### ‚úÖ –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–∞–±–æ—á–∏–µ –º–æ–¥–µ–ª–∏:**
   - **Qwen2-VL 2B** ‚≠ê‚≠ê (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
   - **Qwen3-VL 2B** ‚≠ê‚≠ê (32 —è–∑—ã–∫–∞)

2. **–ò–∑–±–µ–≥–∞–π—Ç–µ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π:**
   - **dots.ocr** ‚ùå (–Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–∞—è)
   - **GOT-OCR HF** ‚ö†Ô∏è (—Ç—Ä–µ–±—É–µ—Ç –æ—á–∏—Å—Ç–∫–∏)

### üîß –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞:
1. **dots.ocr —Ç—Ä–µ–±—É–µ—Ç –≥–ª—É–±–æ–∫–æ–π –æ—Ç–ª–∞–¥–∫–∏:**
   - –ü—Ä–æ–±–ª–µ–º–∞ –≤ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –º–æ–¥–µ–ª–∏
   - –í–æ–∑–º–æ–∂–Ω–æ, –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–µ–π transformers
   - –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

2. **Session state –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é**
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–∞
   - –í—Å–µ –æ–±—Ä–∞—â–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω—ã

## üöÄ –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:

**‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ:**
- URL: http://localhost:8503
- –õ—É—á—à–∏–µ –º–æ–¥–µ–ª–∏: Qwen2-VL 2B, Qwen3-VL 2B
- –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π session state
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—à–∏–±–∫–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

**‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
- dots.ocr –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (–º–æ–∂–Ω–æ –∏—Å–∫–ª—é—á–∏—Ç—å –∏–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞)
- GOT-OCR HF —Ç—Ä–µ–±—É–µ—Ç –æ—á–∏—Å—Ç–∫–∏ —Ç–µ–∫—Å—Ç–∞

---
*–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: 17 —è–Ω–≤–∞—Ä—è 2026*  
*–°—Ç–∞—Ç—É—Å: ‚úÖ –û–°–ù–û–í–ù–´–ï –ü–†–û–ë–õ–ï–ú–´ –†–ï–®–ï–ù–´*  
*–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: http://localhost:8503*