# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ø–æ–ª—É—á–µ–Ω–∏—é –∫–æ–ø–∏—Ä—É–µ–º—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ OCR

## –ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞! ‚úÖ

–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–ª—É—á–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã OCR –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö, –≤–∫–ª—é—á–∞—è —á–∏—Å—Ç—ã–π —Ç–µ–∫—Å—Ç –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è.

## –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1. –ß–∏—Å—Ç—ã–π —Ç–µ–∫—Å—Ç –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

```python
from models.dots_ocr_final import DotsOCRFinalModel

model = DotsOCRFinalModel(config)
model.load_model()

# –ü–æ–ª—É—á–∏—Ç—å —á–∏—Å—Ç—ã–π —Ç–µ–∫—Å—Ç –±–µ–∑ XML-—Ä–∞–∑–º–µ—Ç–∫–∏
clean_text = model.get_copyable_text(image)
print(clean_text)  # –ì–æ—Ç–æ–≤ –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è!
```

### 2. –ö–æ–Ω—Ç—Ä–æ–ª—å XML-–æ–±—Ä–∞–±–æ—Ç–∫–∏

```python
# –ë–µ–∑ XML-–æ–±—Ä–∞–±–æ—Ç–∫–∏ (–±—ã—Å—Ç—Ä–æ, –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è)
raw_text = model.process_image(image, process_xml=False)

# –° XML-–æ–±—Ä–∞–±–æ—Ç–∫–æ–π (—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)
structured = model.process_image(image, process_xml=True)
```

### 3. –†–∞–∑–ª–∏—á–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã

```python
from utils.xml_formatter import format_ocr_result

# –í–∞—à –ø—Ä–∏–º–µ—Ä XML
xml_text = """<table><tr><td>–ò–ù–ù 7702000000</td><td>–ö–ü–ü 770201001</td><td></td></tr>...</table> –°–ß–ï–¢ ‚Ññ 151..."""

# –ß–∏—Å—Ç—ã–π —Ç–µ–∫—Å—Ç
clean = format_ocr_result(xml_text, "clean")
# –†–µ–∑—É–ª—å—Ç–∞—Ç: "–ò–ù–ù 7702000000 –ö–ü–ü 770201001 –ü–æ–ª—É—á–∞—Ç–µ–ª—å –û–û–û –ë–µ—Ç–µ–ª—å–≥–µ–π–∑–µ..."

# –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤–∏–¥
mixed = format_ocr_result(xml_text, "mixed")
# –†–µ–∑—É–ª—å—Ç–∞—Ç: —Ç–∞–±–ª–∏—Ü—ã + –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã–µ –ø–æ–ª—è

# Markdown —Ç–∞–±–ª–∏—Ü—ã
markdown = format_ocr_result(xml_text, "markdown")

# –ü–ª–∞—Ç–µ–∂–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç
payment = format_ocr_result(xml_text, "payment")
```

## –ü—Ä–∏–º–µ—Ä—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –ò—Å—Ö–æ–¥–Ω—ã–π XML
```
<table><tr><td>–ò–ù–ù 7702000000</td><td>–ö–ü–ü 770201001</td><td></td></tr><tr><td>–ü–æ–ª—É—á–∞—Ç–µ–ª—å</td><td></td><td></td></tr><tr><td>–û–û–û ¬´–ë–µ—Ç–µ–ª—å–≥–µ–π–∑–µ –ê–ª—å—Ñ–∞ –¶–µ–Ω—Ç–∞–≤—Ä–∞-3¬ª</td><td></td><td>–°—á. ‚Ññ 40702890123456789012</td></tr></table> –°–ß–ï–¢ ‚Ññ 151 –æ—Ç 14 –∞–ø—Ä–µ–ª—è 2021 –≥.
```

### –ß–∏—Å—Ç—ã–π —Ç–µ–∫—Å—Ç (–¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è)
```
–ò–ù–ù 7702000000 –ö–ü–ü 770201001 –ü–æ–ª—É—á–∞—Ç–µ–ª—å –û–û–û –ë–µ—Ç–µ–ª—å–≥–µ–π–∑–µ –ê–ª—å—Ñ–∞ –¶–µ–Ω—Ç–∞–≤—Ä–∞-3 –°—á. ‚Ññ 40702890123456789012 –°–ß–ï–¢ ‚Ññ 151 –æ—Ç 14 –∞–ø—Ä–µ–ª—è 2021 –≥.
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤–∏–¥
```
–¢–∞–±–ª–∏—Ü–∞ 1:
–ò–ù–ù 7702000000 | –ö–ü–ü 770201001
–ü–æ–ª—É—á–∞—Ç–µ–ª—å
–û–û–û ¬´–ë–µ—Ç–µ–ª—å–≥–µ–π–∑–µ –ê–ª—å—Ñ–∞ –¶–µ–Ω—Ç–∞–≤—Ä–∞-3¬ª | –°—á. ‚Ññ 40702890123456789012

–ò–∑–≤–ª–µ—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
  –ò–ù–ù: 7702000000
  –ö–ü–ü: 770201001
  –°—á–µ—Ç: 40702890123456789012
```

### –ü–ª–∞—Ç–µ–∂–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç
```
–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è: –û–û–û ¬´–ë–µ—Ç–µ–ª—å–≥–µ–π–∑–µ –ê–ª—å—Ñ–∞ –¶–µ–Ω—Ç–∞–≤—Ä–∞-3¬ª

–†–µ–∫–≤–∏–∑–∏—Ç—ã:
  –ò–ù–ù: 7702000000
  –ö–ü–ü: 770201001
  –°—á–µ—Ç: 40702890123456789012
  –ë–ò–ö: 044525225

–¢–∞–±–ª–∏—Ü–∞ 1:
–ò–ù–ù 7702000000 | –ö–ü–ü 770201001
–ü–æ–ª—É—á–∞—Ç–µ–ª—å
–û–û–û ¬´–ë–µ—Ç–µ–ª—å–≥–µ–π–∑–µ –ê–ª—å—Ñ–∞ –¶–µ–Ω—Ç–∞–≤—Ä–∞-3¬ª | –°—á. ‚Ññ 40702890123456789012
```

## API –º–µ—Ç–æ–¥—ã

### –í –º–æ–¥–µ–ª–∏ DotsOCRFinalModel

```python
# –û—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ç–æ–¥ —Å –∫–æ–Ω—Ç—Ä–æ–ª–µ–º XML
result = model.process_image(image, process_xml=False)  # –ë–µ–∑ XML
result = model.process_image(image, process_xml=True)   # –° XML

# –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã
clean_text = model.get_copyable_text(image)           # –ß–∏—Å—Ç—ã–π —Ç–µ–∫—Å—Ç
raw_text = model.extract_text(image)                  # –ë–µ–∑ XML
structured = model.get_structured_result(image)       # –° XML
formatted = model.get_formatted_result(image, "clean") # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π
```

### –£—Ç–∏–ª–∏—Ç—ã —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```python
from utils.xml_formatter import format_ocr_result

# –†–∞–∑–ª–∏—á–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã
clean = format_ocr_result(text, "clean")      # –ß–∏—Å—Ç—ã–π —Ç–µ–∫—Å—Ç
mixed = format_ocr_result(text, "mixed")      # –°–º–µ—à–∞–Ω–Ω—ã–π
markdown = format_ocr_result(text, "markdown") # Markdown
payment = format_ocr_result(text, "payment")  # –ü–ª–∞—Ç–µ–∂–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–¥–µ–ª–∏

```python
config = {
    'model_name': 'ucaslcl/GOT-OCR2_0',
    'process_xml_tables': False,        # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ—Ç–∫–ª—é—á–∏—Ç—å XML
    'extract_structured_fields': True,  # –ò–∑–≤–ª–µ–∫–∞—Ç—å –ø–æ–ª—è
}

model = DotsOCRFinalModel(config)
```

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–î–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞**: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `get_copyable_text()` –∏–ª–∏ `format_type="clean"`
2. **–î–ª—è –∞–Ω–∞–ª–∏–∑–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤**: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `process_xml=True` –∏–ª–∏ `format_type="payment"`
3. **–î–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è**: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `format_type="mixed"` –∏–ª–∏ `format_type="markdown"`
4. **–î–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**: –æ—Ç–∫–ª—é—á–∏—Ç–µ XML-–æ–±—Ä–∞–±–æ—Ç–∫—É –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

## –†–µ—à–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

‚úÖ **–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è**: –î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —á–∏—Å—Ç–æ–≥–æ —Ç–µ–∫—Å—Ç–∞  
‚úÖ **–ö–æ–Ω—Ç—Ä–æ–ª—å XML-–æ–±—Ä–∞–±–æ—Ç–∫–∏**: –ü–∞—Ä–∞–º–µ—Ç—Ä `process_xml` –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è/–æ—Ç–∫–ª—é—á–µ–Ω–∏—è  
‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥**: XML-–ø–∞—Ä—Å–µ—Ä –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤–∞—à –ø—Ä–∏–º–µ—Ä  
‚úÖ **–†–∞–∑–ª–∏—á–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã**: 4 –≤–∞—Ä–∏–∞–Ω—Ç–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤  
‚úÖ **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –°—Ç–∞—Ä—ã–µ –º–µ—Ç–æ–¥—ã –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å  

–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –ª–µ–≥–∫–æ –ø–æ–ª—É—á–∞—Ç—å –∫–∞–∫ —á–∏—Å—Ç—ã–π —Ç–µ–∫—Å—Ç –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è, —Ç–∞–∫ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞! üéâ