# –û—Ç—á–µ—Ç –æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è—Ö —á–∞—Ç–∞ –∏ –ø—Ä–æ–º–ø—Ç–æ–≤ dots.ocr

## üìã –ö—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞

–ù–∞ –æ—Å–Ω–æ–≤–µ –∏–∑—É—á–µ–Ω–∏—è –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ dots.ocr, –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞ –∏ –ø—Ä–∏–º–µ—Ä–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è, –≤–æ—Ç —á—Ç–æ —É–¥–∞–ª–æ—Å—å –≤—ã—è—Å–Ω–∏—Ç—å –æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è—Ö –º–æ–¥–µ–ª–∏:

## ‚úÖ –ß—Ç–æ –ú–û–ñ–ù–û –¥–µ–ª–∞—Ç—å —Å dots.ocr

### 1. **–ó–∞–¥–∞–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã –æ–± –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è—Ö** 
- ‚úÖ **dots.ocr —è–≤–ª—è–µ—Ç—Å—è Vision-Language Model (VLM)** - —ç—Ç–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç—Å—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π
- ‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç chat-—Ñ–æ—Ä–º–∞—Ç** - –≤ –∫–æ–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `processor.apply_chat_template()`
- ‚úÖ **–ü—Ä–∏–Ω–∏–º–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –ø—Ä–æ–º–ø—Ç—ã** - –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∞ —Ç–æ–ª—å–∫–æ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏

### 2. **–†–µ–∂–∏–º —á–∞—Ç–∞/–±–µ—Å–µ–¥—ã**
```python
messages = [
    {
        "role": "user",
        "content": [
            {
                "type": "image",
                "image": image_path
            },
            {"type": "text", "text": "–í–∞—à –≤–æ–ø—Ä–æ—Å –æ–± –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏"}
        ]
    }
]
```

### 3. **–ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã**
–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è 4 —Ä–µ–∂–∏–º–∞:

#### `prompt_layout_all_en` - –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞
```
"Please output the layout information from the PDF image, including each layout element's bbox, its category, and the corresponding text content within the bbox..."
```
- –ò–∑–≤–ª–µ–∫–∞–µ—Ç: bbox, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, —Ç–µ–∫—Å—Ç
- –§–æ—Ä–º–∞—Ç—ã: LaTeX –¥–ª—è —Ñ–æ—Ä–º—É–ª, HTML –¥–ª—è —Ç–∞–±–ª–∏—Ü, Markdown –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω–æ–≥–æ
- –í—ã–≤–æ–¥: JSON

#### `prompt_layout_only_en` - –¢–æ–ª—å–∫–æ –¥–µ—Ç–µ–∫—Ü–∏—è –º–∞–∫–µ—Ç–∞
```
"Please output the layout information from this PDF image, including each layout's bbox and its category..."
```
- –¢–æ–ª—å–∫–æ bbox –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- –ë–µ–∑ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞

#### `prompt_ocr` - –ü—Ä–æ—Å—Ç–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞
```
"Extract the text content from this image."
```
- –¢–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç –±–µ–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- –ò—Å–∫–ª—é—á–∞–µ—Ç Page-header –∏ Page-footer

#### `prompt_grounding_ocr` - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–∑ –æ–±–ª–∞—Å—Ç–∏
```
"Extract text from the given bounding box on the image (format: [x1, y1, x2, y2]).\nBounding Box:\n"
```
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∏–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏

## ü§î –ß—Ç–æ –í–ï–†–û–Ø–¢–ù–û –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å

### –ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –æ–± –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è—Ö
–ü–æ—Å–∫–æ–ª—å–∫—É dots.ocr - —ç—Ç–æ VLM –Ω–∞ –±–∞–∑–µ Qwen2.5-VL, —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏ –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å:

```python
# –ü—Ä–∏–º–µ—Ä—ã –≤–æ–∑–º–æ–∂–Ω—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤
prompts = [
    "–ß—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–æ –Ω–∞ —ç—Ç–æ–π –∫–∞—Ä—Ç–∏–Ω–∫–µ?",
    "–°–∫–æ–ª—å–∫–æ –ª—é–¥–µ–π –Ω–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏?", 
    "–ö–∞–∫–æ–≥–æ —Ü–≤–µ—Ç–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—å?",
    "–û–ø–∏—à–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞",
    "–ï—Å—Ç—å –ª–∏ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ —Ç–∞–±–ª–∏—Ü—ã?",
    "–ö–∞–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É?",
    "–ü–µ—Ä–µ–≤–µ–¥–∏ —Ç–µ–∫—Å—Ç –Ω–∞ —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫",
    "–ù–∞–π–¥–∏ –≤—Å–µ —á–∏—Å–ª–∞ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ",
    "–ö–∞–∫–∏–µ —Ñ–æ—Ä–º—É–ª—ã —Å–æ–¥–µ—Ä–∂–∏—Ç —Å—Ç—Ä–∞–Ω–∏—Ü–∞?"
]
```

### –ú–Ω–æ–≥–æ—à–∞–≥–æ–≤—ã–π –¥–∏–∞–ª–æ–≥
```python
# –ü–µ—Ä–≤—ã–π –≤–æ–ø—Ä–æ—Å
messages = [{"role": "user", "content": [{"type": "image", "image": img}, {"type": "text", "text": "–ß—Ç–æ —ç—Ç–æ –∑–∞ –¥–æ–∫—É–º–µ–Ω—Ç?"}]}]

# –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –±–µ—Å–µ–¥—ã
messages.append({"role": "assistant", "content": "–≠—Ç–æ —Å—á–µ—Ç-—Ñ–∞–∫—Ç—É—Ä–∞..."})
messages.append({"role": "user", "content": [{"type": "text", "text": "–ê –∫–∞–∫–∞—è –æ–±—â–∞—è —Å—É–º–º–∞?"}]})
```

## ‚ùå –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### 1. **–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö**
- –ú–æ–¥–µ–ª—å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è **–¥–æ–∫—É–º–µ–Ω—Ç–æ–≤**, –∞ –Ω–µ –æ–±—â–∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –õ—É—á—à–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å PDF, —Ç–µ–∫—Å—Ç–∞–º–∏, —Ç–∞–±–ª–∏—Ü–∞–º–∏, —Ñ–æ—Ä–º—É–ª–∞–º–∏

### 2. **–ù–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–∞—Ä—Ç–∏–Ω–∫–∏ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö**
–ò–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:
> "Pictures in documents are currently not parsed."

### 3. **–ü—Ä–æ–±–ª–µ–º—ã —Å –Ω–µ–∫–æ—Ç–æ—Ä—ã–º–∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏**
- –°–ª–æ–∂–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –∏ —Ñ–æ—Ä–º—É–ª—ã –º–æ–≥—É—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è –Ω–µ—Ç–æ—á–Ω–æ
- –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–µ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã (–º–Ω–æ–≥–æ—Ç–æ—á–∏—è, –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏—è) –º–æ–≥—É—Ç –≤—ã–∑—ã–≤–∞—Ç—å –∑–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏–µ

### 4. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è**
- –û–ø—Ç–∏–º–∞–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ –¥–æ 11,289,600 –ø–∏–∫—Å–µ–ª–µ–π
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è DPI 200 –¥–ª—è PDF

## üß™ –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —á–∞—Ç–∞

### –ë–∞–∑–æ–≤—ã–π —Ç–µ—Å—Ç
```python
from models.dots_ocr_final import DotsOCRFinalModel

model = DotsOCRFinalModel(config)
model.load_model()

# –¢–µ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞
result = model.chat(image, "–ß—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–æ –Ω–∞ —ç—Ç–æ–π –∫–∞—Ä—Ç–∏–Ω–∫–µ?")
print(result)

# –¢–µ—Å—Ç –∞–Ω–∞–ª–∏–∑–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞  
result = model.chat(image, "–û–ø–∏—à–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —ç—Ç–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞")
print(result)

# –¢–µ—Å—Ç –ø–æ–∏—Å–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
result = model.chat(image, "–ù–∞–π–¥–∏ –≤—Å–µ –¥–∞—Ç—ã –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ")
print(result)
```

### –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π —Ç–µ—Å—Ç
```python
# –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –ø—Ä–æ–º–ø—Ç—ã
test_prompts = [
    "–û–ø–∏—à–∏ —á—Ç–æ –≤–∏–¥–∏—à—å –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏",
    "–°–∫–æ–ª—å–∫–æ —Ç–∞–±–ª–∏—Ü –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ?",
    "–ö–∞–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ?", 
    "–ï—Å—Ç—å –ª–∏ —Ñ–æ—Ä–º—É–ª—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ?",
    "–ü–µ—Ä–µ–≤–µ–¥–∏ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π",
    "–ö–∞–∫–∏–µ —Ü–≤–µ—Ç–∞ –ø—Ä–µ–æ–±–ª–∞–¥–∞—é—Ç?",
    "–ù–∞–π–¥–∏ –≤—Å–µ –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤",
    "–û–ø—Ä–µ–¥–µ–ª–∏ —Ç–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞"
]

for prompt in test_prompts:
    try:
        result = model.chat(image, prompt)
        print(f"Q: {prompt}")
        print(f"A: {result}\n")
    except Exception as e:
        print(f"–û—à–∏–±–∫–∞ —Å –ø—Ä–æ–º–ø—Ç–æ–º '{prompt}': {e}")
```

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### 1. **–î–ª—è OCR –∑–∞–¥–∞—á** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã
### 2. **–î–ª—è –∞–Ω–∞–ª–∏–∑–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤** - —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–º–∏ –≤–æ–ø—Ä–æ—Å–∞–º–∏
### 3. **–î–ª—è —á–∞—Ç–∞** - –Ω–∞—á–∏–Ω–∞–π—Ç–µ —Å –ø—Ä–æ—Å—Ç—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ —É—Å–ª–æ–∂–Ω—è–π—Ç–µ
### 4. **–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö** - –ø–µ—Ä–µ–∫–ª—é—á–∞–π—Ç–µ—Å—å –Ω–∞ `prompt_layout_only_en` –∏–ª–∏ `prompt_ocr`

## üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**dots.ocr –ú–û–ñ–ï–¢ —Ä–∞–±–æ—Ç–∞—Ç—å –≤ —Ä–µ–∂–∏–º–µ —á–∞—Ç–∞**, –ø–æ—Å–∫–æ–ª—å–∫—É:
- –≠—Ç–æ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è Vision-Language Model
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç chat-template –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É
- –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã
- –û—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ Qwen2.5-VL (–∫–æ—Ç–æ—Ä–∞—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —á–∞—Ç)

**–ù–û** –º–æ–¥–µ–ª—å **—Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö** –∏ –º–æ–∂–µ—Ç –¥–∞–≤–∞—Ç—å –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–∞ –æ–±—â–∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è—Ö –∏–ª–∏ –ø—Ä–∏ –≤–æ–ø—Ä–æ—Å–∞—Ö, –Ω–µ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –∞–Ω–∞–ª–∏–∑–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —á–∞—Ç–∞ –Ω–∞ –≤–∞—à–∏—Ö –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∑–∞–¥–∞—á–∞—Ö, –Ω–∞—á–∏–Ω–∞—è —Å –ø—Ä–æ—Å—Ç—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö.