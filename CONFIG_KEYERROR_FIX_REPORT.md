# üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –û–®–ò–ë–ö–ò KeyError: 'ocr'

**–î–∞—Ç–∞:** 25 —è–Ω–≤–∞—Ä—è 2026  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û**  
**–û—à–∏–±–∫–∞:** `KeyError: 'ocr'` –≤ —Å—Ç—Ä–æ–∫–µ 1439 app.py  

---

## üêõ –û–ü–ò–°–ê–ù–ò–ï –ü–†–û–ë–õ–ï–ú–´

### **–û—à–∏–±–∫–∞:**
```
KeyError: 'ocr'
File "C:\Users\Colorful\Documents\GitHub\chatvlmllm\app.py", line 1439, in <module>
type=config["ocr"]["supported_formats"],
~~~~~~^^^^^^^
```

### **–ü—Ä–∏—á–∏–Ω–∞:**
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–æ –ø—Ä—è–º—ã–µ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ `config["ocr"]["supported_formats"]` –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –∫–ª—é—á–µ–π, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ `KeyError` –µ—Å–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–∑–º–µ–Ω—è–ª–∞—Å—å.

### **–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ –º–µ—Å—Ç–∞:**
1. **–°—Ç—Ä–æ–∫–∞ 1087:** `config["ocr"]["supported_formats"]` –≤ —Ä–µ–∂–∏–º–µ OCR
2. **–°—Ç—Ä–æ–∫–∞ 1439:** `config["ocr"]["supported_formats"]` –≤ —Ä–µ–∂–∏–º–µ —á–∞—Ç–∞  
3. **–°—Ç—Ä–æ–∫–∞ 770:** `config["models"][x]["name"]` –¥–ª—è Transformers –º–æ–¥–µ–ª–µ–π
4. **–°—Ç—Ä–æ–∫–∞ 776:** `config["models"][selected_model]` –¥–ª—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –º–æ–¥–µ–ª–∏
5. **–°—Ç—Ä–æ–∫–∞ 1106:** `config["document_templates"].keys()` –¥–ª—è —Ç–∏–ø–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
6. **–°—Ç—Ä–æ–∫–∞ 1298:** `config["document_templates"][document_type]["fields"]` –¥–ª—è –ø–æ–ª–µ–π

---

## üîß –ü–†–ò–ú–ï–ù–ï–ù–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### **1. –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ OCR –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**

**–ë—ã–ª–æ:**
```python
type=config["ocr"]["supported_formats"]
```

**–°—Ç–∞–ª–æ:**
```python
type=config.get("ocr", {}).get("supported_formats", ["jpg", "jpeg", "png", "bmp", "tiff"])
```

### **2. –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ –º–æ–¥–µ–ª—è–º:**

**–ë—ã–ª–æ:**
```python
list(config["models"].keys())
format_func=lambda x: config["models"][x]["name"]
model_info = config["models"][selected_model]
```

**–°—Ç–∞–ª–æ:**
```python
list(config.get("models", {}).keys())
format_func=lambda x: config.get("models", {}).get(x, {}).get("name", x)
model_info = config.get("models", {}).get(selected_model, {})
```

### **3. –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ —à–∞–±–ª–æ–Ω–∞–º –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:**

**–ë—ã–ª–æ:**
```python
list(config["document_templates"].keys())
fields = config["document_templates"][document_type]["fields"]
```

**–°—Ç–∞–ª–æ:**
```python
list(config.get("document_templates", {}).keys())
fields = config.get("document_templates", {}).get(document_type, {}).get("fields", [])
```

### **4. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:**

**–ë—ã–ª–æ:**
```python
index=list(config["models"].keys()).index("qwen3_vl_2b")
```

**–°—Ç–∞–ª–æ:**
```python
index=0 if "qwen3_vl_2b" not in config.get("models", {}) else list(config.get("models", {}).keys()).index("qwen3_vl_2b")
```

---

## ‚úÖ –†–ï–ó–£–õ–¨–¢–ê–¢–´ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö –æ–±—Ä–∞—â–µ–Ω–∏–π:**
```python
# –í—Å–µ —ç—Ç–∏ –æ–±—Ä–∞—â–µ–Ω–∏—è —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ:
OCR formats: ['jpg', 'jpeg', 'png', 'bmp', 'tiff']
Models: ['qwen3_vl_2b']
Document templates: ['passport', 'invoice', 'receipt']
‚úÖ –í—Å–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –æ–±—Ä–∞—â–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç
```

### **–ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:**
```
‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
‚úÖ –î–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ http://localhost:8507
‚úÖ –ù–µ—Ç KeyError –≤ –ª–æ–≥–∞—Ö
```

---

## üõ°Ô∏è –ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê –ù–û–í–û–ì–û –ü–û–î–•–û–î–ê

### **1. –£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –ø–∞–¥–∞–µ—Ç –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Å–µ–∫—Ü–∏–π –≤ config.yaml
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ä–∞–∑—É–º–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- Graceful degradation –ø—Ä–∏ –Ω–µ–ø–æ–ª–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### **2. –õ—É—á—à–∞—è –æ—Ç–ª–∞–¥–∫–∞:**
- –ü–æ–Ω—è—Ç–Ω—ã–µ fallback –∑–Ω–∞—á–µ–Ω–∏—è
- –ù–µ—Ç –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã—Ö –∫—Ä—ç—à–µ–π
- –õ–µ–≥—á–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### **3. –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:**
- –†–∞–±–æ—Ç–∞–µ—Ç —Å–æ —Å—Ç–∞—Ä—ã–º–∏ –∏ –Ω–æ–≤—ã–º–∏ –≤–µ—Ä—Å–∏—è–º–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã config.yaml
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç –ø–æ–ª–Ω–æ–π –ø–µ—Ä–µ–Ω–∞—Å—Ç—Ä–æ–π–∫–∏

---

## üîç –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –£–õ–£–ß–®–ï–ù–ò–Ø

### **–î–æ–±–∞–≤–ª–µ–Ω—ã –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:**

1. **OCR —Ñ–æ—Ä–º–∞—Ç—ã:** `["jpg", "jpeg", "png", "bmp", "tiff"]`
2. **–ò–º–µ–Ω–∞ –º–æ–¥–µ–ª–µ–π:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–ª—é—á –º–æ–¥–µ–ª–∏ –µ—Å–ª–∏ –∏–º—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
3. **–ü–æ–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:** –ü—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ `[]` –µ—Å–ª–∏ –ø–æ–ª—è –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã
4. **–ò–Ω–¥–µ–∫—Å—ã:** `0` –µ—Å–ª–∏ –º–æ–¥–µ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–µ –Ω–∞–π–¥–µ–Ω–∞

### **–£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:**
- –ù–µ—Ç –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã—Ö KeyError
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –¥–∞–∂–µ —Å –Ω–µ–ø–æ–ª–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤–º–µ—Å—Ç–æ –æ—à–∏–±–∫–∏

---

## üìã –ü–†–û–í–ï–†–û–ß–ù–´–ô –°–ü–ò–°–û–ö

- ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ KeyError –≤ app.py**
- ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω—ã –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ config**
- ‚úÖ **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**
- ‚úÖ **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫**
- ‚úÖ **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**
- ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω—ã —Ä–∞–∑—É–º–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é**

---

## üéØ –ò–¢–û–ì

**–ü—Ä–æ–±–ª–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–µ–Ω–∞!**

- ‚ùå **–ë—ã–ª–æ:** `KeyError: 'ocr'` –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- ‚úÖ **–°—Ç–∞–ª–æ:** –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ

**–í—Å–µ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Ç–µ–ø–µ—Ä—å –±–µ–∑–æ–ø–∞—Å–Ω—ã –∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –º–µ—Ç–æ–¥ `.get()` —Å fallback –∑–Ω–∞—á–µ–Ω–∏—è–º–∏.**

---

**–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é:** http://localhost:8507