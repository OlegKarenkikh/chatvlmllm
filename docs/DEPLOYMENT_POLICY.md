# ๐ง ะะพะปะธัะธะบะฐ ัะฐะทะฒััััะฒะฐะฝะธั ะผะพะดะตะปะตะน

## ๐ ะะฑะทะพั

ะะฐะฝะฝัะน ะดะพะบัะผะตะฝั ะพะฟะธััะฒะฐะตั ะฟะพะปะธัะธะบั ะทะฐะฟััะบะฐ VLM-ะผะพะดะตะปะตะน ะฒ ััะปะพะฒะธัั ะพะณัะฐะฝะธัะตะฝะฝัั ัะตััััะพะฒ (12 GB VRAM).

## ๐ฏ ะัะธะฝัะธะฟั

### ะะดะธะฝ ะฐะบัะธะฒะฝัะน ะบะพะฝัะตะนะฝะตั

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    ะะะะะขะะะ ะะะะฃะกะะ                         โ
โ                                                             โ
โ  โ ะะพะฟััะบะฐะตััั: 1 ะฐะบัะธะฒะฝัะน ะบะพะฝัะตะนะฝะตั ั ะผะพะดะตะปัั             โ
โ  โ ะะฐะฟัะตัะฐะตััั: ะะฐัะฐะปะปะตะปัะฝัะน ะทะฐะฟััะบ ะฝะตัะบะพะปัะบะธั ะผะพะดะตะปะตะน     โ
โ                                                             โ
โ  ะัะธัะธะฝะฐ: ะะณัะฐะฝะธัะตะฝะธะต VRAM (12 GB RTX 5070 Ti)              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## ๐ ะะตะถะธะผั ัะฐะฑะพัั

### 1. vLLM ัะตะถะธะผ (ะะตะบะพะผะตะฝะดัะตะผัะน)

**ะะฟะธัะฐะฝะธะต**: ะะพะดะตะปั ะทะฐะฟััะบะฐะตััั ะฒ Docker ะบะพะฝัะตะนะฝะตัะต ั vLLM ัะตัะฒะตัะพะผ.

**ะัะตะธะผััะตััะฒะฐ**:
- ะะฟัะธะผะธะทะฐัะธั GPU ะฟะฐะผััะธ (PagedAttention)
- OpenAI-ัะพะฒะผะตััะธะผัะน API
- ะะพะดะดะตัะถะบะฐ ะฑะฐััะธะฝะณะฐ ะทะฐะฟัะพัะพะฒ
- ะกัะฐะฑะธะปัะฝะฐั ัะฐะฑะพัะฐ

**ะัะฟะพะปัะทะพะฒะฐะฝะธะต VRAM ะฟะพ ะผะพะดะตะปัะผ**:

| ะะพะดะตะปั | VRAM | ะะพะฝัะตะนะฝะตั |
|--------|------|----------|
| dots.ocr | 8.0 GB | vllm-dots-ocr |
| Qwen3-VL 2B | 4.4 GB | vllm-qwen3-vl |
| Qwen2-VL 2B | 4.2 GB | vllm-qwen2-vl |

**ะะฐะฟััะบ**:
```bash
# ะงะตัะตะท Docker Compose
docker-compose up -d vllm-dots-ocr

# ะะปะธ ัะตัะตะท ะผะตะฝะตะดะถะตั ะฒ UI
# Sidebar โ ะัะฑะพั ะผะพะดะตะปะธ โ "ะะตัะตะบะปััะธัััั"
```

### 2. Transformers ัะตะถะธะผ (ะะพะบะฐะปัะฝัะน)

**ะะฟะธัะฐะฝะธะต**: ะะพะดะตะปั ะทะฐะณััะถะฐะตััั ะฝะฐะฟััะผัั ัะตัะตะท HuggingFace Transformers.

**ะัะตะธะผััะตััะฒะฐ**:
- ะะต ััะตะฑัะตั Docker
- ะัััััะน ััะฐัั ะดะปั ัะบัะฟะตัะธะผะตะฝัะพะฒ
- ะะพัััะฟ ะบะพ ะฒัะตะผ ะผะพะดะตะปัะผ HuggingFace

**ะะตะดะพััะฐัะบะธ**:
- ะะตะฝะตะต ัััะตะบัะธะฒะฝะพะต ะธัะฟะพะปัะทะพะฒะฐะฝะธะต ะฟะฐะผััะธ
- ะะตั ะฑะฐััะธะฝะณะฐ
- ะะพะทะผะพะถะฝั CUDA ะพัะธะฑะบะธ ะฟัะธ ะฟะตัะตะบะปััะตะฝะธะธ

**ะัะฟะพะปัะทะพะฒะฐะฝะธะต**:
```python
from models.model_loader import ModelLoader

# ะะฐะณััะทะบะฐ ะผะพะดะตะปะธ
model = ModelLoader.load_model('qwen3_vl_2b')

# ะะฑัะฐะฑะพัะบะฐ ะธะทะพะฑัะฐะถะตะฝะธั
result = model.process_image(image)
```

## ๐ ะะตัะตะบะปััะตะฝะธะต ะผะตะถะดั ะผะพะดะตะปัะผะธ

### vLLM ัะตะถะธะผ

```
ะะพะปัะทะพะฒะฐัะตะปั ะฒัะฑะธัะฐะตั ะฝะพะฒัั ะผะพะดะตะปั
           โ
           โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ SingleContainerManager      โ
โ stop_all_containers()       โ
โ           โ                 โ
โ           โผ                 โ
โ ะััะฐะฝะพะฒะบะฐ ัะตะบััะตะณะพ ะบะพะฝัะตะนะฝะตัะฐโ
โ           โ                 โ
โ           โผ                 โ
โ start_container(new_model)  โ
โ           โ                 โ
โ           โผ                 โ
โ ะะถะธะดะฐะฝะธะต ะณะพัะพะฒะฝะพััะธ API     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
           โ
           โผ
      ะะพะดะตะปั ะณะพัะพะฒะฐ
```

### Transformers ัะตะถะธะผ

```
ะะพะปัะทะพะฒะฐัะตะปั ะฒัะฑะธัะฐะตั ะฝะพะฒัั ะผะพะดะตะปั
           โ
           โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ModelLoader                 โ
โ unload_all_models()         โ
โ           โ                 โ
โ           โผ                 โ
โ torch.cuda.empty_cache()    โ
โ           โ                 โ
โ           โผ                 โ
โ load_model(new_model)       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
           โ
           โผ
      ะะพะดะตะปั ะทะฐะณััะถะตะฝะฐ
```

## โ๏ธ ะะณัะฐะฝะธัะตะฝะธั

### VRAM ะปะธะผะธัั

| ะะฑัะธะน VRAM | ะะพัััะฟะฝะพ ะดะปั ะผะพะดะตะปะธ | ะะตะบะพะผะตะฝะดัะตะผัะน ะผะฐะบัะธะผัะผ |
|------------|--------------------|-----------------------|
| 12 GB | ~10 GB | 8 GB |

### ะะพะดะตะปะธ, ััะตะฑัััะธะต ะพัะพะฑะพะณะพ ะฒะฝะธะผะฐะฝะธั

1. **dots.ocr (8 GB)** - ะฝะฐ ะฟัะตะดะตะปะต, ะผะพะถะตั ะฑััั ะฝะตััะฐะฑะธะปัะฝะฐ
2. **Phi-3.5 Vision (7.7 GB)** - ััะตะฑัะตั ะฐะบะบััะฐัะฝะพะณะพ ัะฟัะฐะฒะปะตะฝะธั ะฟะฐะผัััั
3. **Qwen3-VL 2B (4.4 GB)** - ะพะฟัะธะผะฐะปัะฝัะน ะฒัะฑะพั ะดะปั 12 GB VRAM

## ๐ ะะตะบะพะผะตะฝะดะฐัะธะธ

1. **ะะปั ััะฐะฑะธะปัะฝะพะน ัะฐะฑะพัั**: ะธัะฟะพะปัะทัะนัะต vLLM ัะตะถะธะผ
2. **ะะปั ัะบัะฟะตัะธะผะตะฝัะพะฒ**: Transformers ัะตะถะธะผ ั ัะฐััะพะน ะพัะธััะบะพะน ะฟะฐะผััะธ
3. **ะัะธ ะพัะธะฑะบะฐั ะฟะฐะผััะธ**: ะฟะตัะตะทะฐะณััะทะธัะต ัััะฐะฝะธัั ะธ ะฒัะฑะตัะธัะต ะผะตะฝัััั ะผะพะดะตะปั
4. **ะะปั ัะตะฝะดะตัะฝะพะน ะดะพะบัะผะตะฝัะฐัะธะธ**: ะฝะฐัะฝะธัะต ั Qwen3-VL, ะฟัะธ ะฝะตะพะฑัะพะดะธะผะพััะธ ะฟะตัะตะบะปััะธัะตัั ะฝะฐ dots.ocr

## ๐ง ะฃัััะฐะฝะตะฝะธะต ะฟัะพะฑะปะตะผ

### CUDA out of memory

```bash
# ะัะธััะบะฐ GPU ะฟะฐะผััะธ
python -c "import torch; torch.cuda.empty_cache()"

# ะะตัะตะทะฐะฟััะบ Docker ะบะพะฝัะตะนะฝะตัะพะฒ
docker-compose down
docker-compose up -d
```

### ะะพะฝัะตะนะฝะตั ะฝะต ะทะฐะฟััะบะฐะตััั

```bash
# ะัะพะฒะตัะบะฐ ะปะพะณะพะฒ
docker logs vllm-dots-ocr

# ะัะพะฒะตัะบะฐ ะธัะฟะพะปัะทะพะฒะฐะฝะธั GPU
nvidia-smi
```

---

*ะะพะบัะผะตะฝัะฐัะธั ะฟะพะปะธัะธะบะธ ัะฐะทะฒััััะฒะฐะฝะธั ะดะปั ัะบะพะปัะฝะพะณะพ ะฟัะพะตะบัะฐ ChatVLMLLM*