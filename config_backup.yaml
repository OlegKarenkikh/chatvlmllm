# ОПТИМИЗИРОВАННАЯ КОНФИГУРАЦИЯ ДЛЯ RTX 5070 TI (BLACKWELL)

# Настройки OCR
ocr:
  supported_formats: ["png", "jpg", "jpeg", "bmp", "tiff", "webp"]
  max_image_size_mb: 10
  preprocessing:
    enable_enhancement: true
    enable_denoising: true
    enable_deskewing: false

# Шаблоны документов
document_templates:
  passport:
    name: "Паспорт"
    fields:
      - "Фамилия"
      - "Имя"
      - "Отчество"
      - "Дата рождения"
      - "Место рождения"
      - "Серия и номер"
      - "Дата выдачи"
      - "Код подразделения"
  
  driver_license:
    name: "Водительское удостоверение"
    fields:
      - "ФИО"
      - "Дата рождения"
      - "Место рождения"
      - "Дата выдачи"
      - "Действительно до"
      - "Категории"
      - "Серия и номер"
  
  invoice:
    name: "Счет-фактура"
    fields:
      - "Номер документа"
      - "Дата"
      - "Поставщик"
      - "Покупатель"
      - "Сумма"
      - "НДС"
  
  general:
    name: "Общий документ"
    fields:
      - "Текст"

models:
  qwen_vl_2b:
    name: "Qwen2-VL 2B (Blackwell Optimized)"
    model_path: "Qwen/Qwen2-VL-2B-Instruct"
    precision: "bf16"  # Оптимально для Blackwell Tensor Cores
    attn_implementation: "eager"  # Стабильно на sm_120
    use_flash_attention: false  # НЕ поддерживается на Blackwell
    device_map: "auto"
    trust_remote_code: true
    max_new_tokens: 4096
    context_length: 8192
    
  qwen3_vl_2b:
    name: "Qwen3-VL 2B (Blackwell Optimized)"
    model_path: "Qwen/Qwen3-VL-2B-Instruct"
    precision: "bf16"
    attn_implementation: "eager"
    use_flash_attention: false
    device_map: "auto"
    trust_remote_code: true
    max_new_tokens: 4096
    context_length: 8192
    
  dots_ocr:
    name: "dots.ocr (Blackwell Compatible)"
    model_path: "rednote-hilab/dots.ocr"
    precision: "bf16"
    attn_implementation: "eager"
    use_flash_attention: false
    device_map: "auto"
    trust_remote_code: true
    max_new_tokens: 2048  # OCR модель, меньше токенов
    context_length: 4096

performance:
  blackwell_optimizations:
    enable_tf32: true
    enable_cudnn_benchmark: true
    use_bfloat16: true
    enable_sdpa: true
    
  generation_settings:
    default_max_tokens: 4096
    max_context_length: 8192
    temperature: 0.7
    top_p: 0.9
    repetition_penalty: 1.1
    
gpu_requirements:
  rtx_5070_ti:
    compute_capability: "sm_120"
    cuda_version: "12.8+"
    pytorch_version: "2.7.0+"
    flash_attention_support: false
    recommended_precision: "bf16"
    tensor_cores: "5th_gen"
    vram_total: "12GB"
    vram_available: "3GB"  # Текущий запас
