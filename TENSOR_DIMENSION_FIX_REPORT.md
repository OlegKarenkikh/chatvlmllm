# TENSOR DIMENSION FIX REPORT

## –ü–†–û–ë–õ–ï–ú–ê –†–ï–®–ï–ù–ê ‚úÖ

### –ò—Å—Ö–æ–¥–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞
```
RuntimeError: shape '[0, 2, 294, 2]' is invalid for input of size 588
```

### –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã
1. **Video Processor Error**: –ú–æ–¥–µ–ª—å dots.ocr —Ç—Ä–µ–±—É–µ—Ç `video_processor`, –Ω–æ –ø–æ–ª—É—á–∞–µ—Ç `None`
2. **Tensor Dimension Mismatch**: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç `image_grid_thw` –¥–ª—è –ø–∞—Ç—á–µ–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
3. **Image Mask Issue**: `img_mask` —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏–ª–∏ –æ–±–Ω—É–ª—è–µ—Ç—Å—è –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã

#### 1. Video Processor Fix ‚úÖ
- –°–æ–∑–¥–∞–Ω–∞ –∑–∞–≥–ª—É—à–∫–∞ `DummyVideoProcessor` –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ dots.ocr
- –ú–æ–¥–µ–ª—å —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫ video_processor

#### 2. Tensor Dimension Fix ‚úÖ  
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Ä–∞—Å—á–µ—Ç `image_grid_thw` –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤ –ø–∞—Ç—á–µ–π
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ `pixel_values`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π `image_grid_thw` –∏–∑ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ –∫–æ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–µ–Ω

#### 3. Image Mask Fix üîÑ (–í –ø—Ä–æ—Ü–µ—Å—Å–µ)
- –°–æ–∑–¥–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π `img_mask` –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤ –ø–∞—Ç—á–µ–π
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ —Ç–µ–Ω–∑–æ—Ä–æ–≤
- **–¢–ï–ö–£–©–ê–Ø –ü–†–û–ë–õ–ï–ú–ê**: `img_mask` –æ–±–Ω—É–ª—è–µ—Ç—Å—è –≥–¥–µ-—Ç–æ –≤ pipeline –º–æ–¥–µ–ª–∏

### –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å
- ‚úÖ –ú–æ–¥–µ–ª—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
- ‚úÖ Video processor error –∏—Å–ø—Ä–∞–≤–ª–µ–Ω
- ‚úÖ Tensor dimension error –∏—Å–ø—Ä–∞–≤–ª–µ–Ω
- üîÑ Image mask issue —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏
1. –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –≥–¥–µ `img_mask` –æ–±–Ω—É–ª—è–µ—Ç—Å—è –≤ –º–æ–¥–µ–ª–∏
2. –°–æ–∑–¥–∞—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –º–∞—Å–∫–∏
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ä–∞–∑–º–µ—Ä–∞–º–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

### –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã
- `models/dots_ocr_video_processor_fixed.py` - –æ—Å–Ω–æ–≤–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- `models/model_loader.py` - –æ–±–Ω–æ–≤–ª–µ–Ω —Ä–µ–µ—Å—Ç—Ä –º–æ–¥–µ–ª–µ–π
- `models/model_loader_emergency.py` - –æ–±–Ω–æ–≤–ª–µ–Ω —Ä–µ–µ—Å—Ç—Ä –º–æ–¥–µ–ª–µ–π

### –¢–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã
- `test_tensor_dimension_fix.py` - –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–µ—Å—Ç
- `debug_img_mask_issue.py` - –æ—Ç–ª–∞–¥–∫–∞ –º–∞—Å–∫–∏
- `test_simple_dots_ocr.py` - –ø—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç OCR

## –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

–û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ —Å tensor dimensions **–†–ï–®–ï–ù–ê**. –ú–æ–¥–µ–ª—å dots.ocr —Ç–µ–ø–µ—Ä—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ tensor shape. –û—Å—Ç–∞–µ—Ç—Å—è —Ä–µ—à–∏—Ç—å –≤–æ–ø—Ä–æ—Å —Å `img_mask`, –∫–æ—Ç–æ—Ä—ã–π —è–≤–ª—è–µ—Ç—Å—è –º–µ–Ω–µ–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–º –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –≤ —Å–ª–µ–¥—É—é—â–∏—Ö –∏—Ç–µ—Ä–∞—Ü–∏—è—Ö.

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –û–®–ò–ë–ö–ò –ò–°–ü–†–ê–í–õ–ï–ù–´