# üîß –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏: –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ JSON –≤ —Ç–∞–±–ª–∏—Ü—ã –∏ BBOX –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è

## üêõ –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –†–µ–∂–∏–º OCR
Streamlit –Ω–µ –ø—Ä–æ–≤–æ–¥–∏—Ç –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ JSON –æ—Ç–≤–µ—Ç–æ–≤ –æ—Ç `dots.ocr` –≤ –∫—Ä–∞—Å–∏–≤—ã–µ HTML —Ç–∞–±–ª–∏—Ü—ã –ø—Ä–∏ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ OCR —Ä–µ–∂–∏–º–µ.

**–°–∏–º–ø—Ç–æ–º—ã:**
- JSON –æ—Ç–≤–µ—Ç –æ—Ç `dots.ocr` –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–∞–∫ –æ–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç
- –§—É–Ω–∫—Ü–∏—è `convert_dots_ocr_json_to_html_table()` –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
- –ù–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è BBOX –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –†–µ–∂–∏–º —á–∞—Ç–∞
–ü–æ–ª–Ω–∞—è BBOX –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —Ä–µ–∂–∏–º–µ —á–∞—Ç–∞ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤ `dots.ocr`.

**–°–∏–º–ø—Ç–æ–º—ã:**
- JSON –æ—Ç–≤–µ—Ç –Ω–µ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü—É
- BBOX –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —á–∞—Ç–µ

---

## üîç –ü—Ä–∏—á–∏–Ω—ã –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–∏—á–∏–Ω–∞ 1: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ JSON –≤ OCR —Ä–µ–∂–∏–º–µ

–í —Ñ–∞–π–ª–µ `app.py` –≤ —Ä–∞–∑–¥–µ–ª–µ OCR (–æ–∫–æ–ª–æ —Å—Ç—Ä–æ–∫–∏ 770) —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ç–∞–∫:

```python
# –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:
st.markdown("**üî§ –†–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç:**")
st.code(result["text"], language="text")
```

–≠—Ç–æ –ø—Ä–æ—Å—Ç–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç JSON –∫–∞–∫ —Ç–µ–∫—Å—Ç, –Ω–µ –ø—Ä–æ–≤–µ—Ä—è—è –µ–≥–æ —Ñ–æ—Ä–º–∞—Ç –∏ –Ω–µ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—è –≤ —Ç–∞–±–ª–∏—Ü—É.

### –ü—Ä–∏—á–∏–Ω–∞ 2: –ù–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –∫–ª—é—á–µ–π session_state

–§—É–Ω–∫—Ü–∏—è `display_bbox_visualization_improved()` –∏—â–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤:
```python
st.session_state.last_ocr_result
```

–ù–æ –≤ OCR —Ä–µ–∂–∏–º–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤:
```python
st.session_state.ocr_result  # –†–ê–ó–ù–´–ï –∫–ª—é—á–∏!
```

–ü–æ—ç—Ç–æ–º—É BBOX –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ –∏ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è.

### –ü—Ä–∏—á–∏–Ω–∞ 3: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ prompt_info

–§—É–Ω–∫—Ü–∏—è `display_bbox_visualization_improved()` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
```python
prompt_info = ocr_result.get("prompt_info", {})
if not prompt_info.get("bbox_enabled", False):
    return  # –ù–µ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å
```

–ù–æ –≤ OCR —Ä–µ–∂–∏–º–µ —ç—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, –ø–æ—ç—Ç–æ–º—É –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 1: –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É JSON –≤ OCR —Ä–µ–∂–∏–º–µ

–ù–∞–π—Ç–∏ –≤ `app.py` –æ–∫–æ–ª–æ —Å—Ç—Ä–æ–∫–∏ 740 (–ø–æ—Å–ª–µ `st.session_state.ocr_result = {...}`):

```python
st.session_state.ocr_result = {
    "text": text,
    "confidence": quality_score,
    "processing_time": processing_time,
    "model_used": selected_model,
    "execution_mode": execution_mode,
    "preprocessing_applied": enhance_image or denoise or deskew
}

# –î–û–ë–ê–í–ò–¢–¨ –≠–¢–û–¢ –ö–û–î:
# –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ç–∞–∫–∂–µ –¥–ª—è BBOX –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
if 'prompt_info' not in st.session_state.ocr_result:
    st.session_state.ocr_result['prompt_info'] = {
        'bbox_enabled': True,  # –í—Å–µ–≥–¥–∞ –≤–∫–ª—é—á–∞–µ–º BBOX –¥–ª—è OCR —Ä–µ–∂–∏–º–∞
        'table_processing': document_type in ['invoice', 'table']
    }
    st.session_state.ocr_result['image'] = processed_image

# –ö–æ–ø–∏—Ä—É–µ–º –≤ last_ocr_result –¥–ª—è display_bbox_visualization_improved
st.session_state.last_ocr_result = st.session_state.ocr_result.copy()

st.success("‚úÖ –¢–µ–∫—Å—Ç —É—Å–ø–µ—à–Ω–æ –∏–∑–≤–ª–µ—á–µ–Ω!")

# –î–û–ë–ê–í–ò–¢–¨ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é BBOX —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è
if result.get('text'):
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ JSON —Å BBOX
    if is_dots_ocr_json_response(result['text']):
        st.info("üîç –û–±–Ω–∞—Ä—É–∂–µ–Ω JSON —Å BBOX –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏")
        display_bbox_visualization_improved(st.session_state.last_ocr_result)

st.rerun()
```

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 2: –ó–∞–º–µ–Ω–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –≤ OCR —Ä–µ–∂–∏–º–µ

–ù–∞–π—Ç–∏ –≤ `app.py` –æ–∫–æ–ª–æ —Å—Ç—Ä–æ–∫–∏ 770 (–±–ª–æ–∫ —Å "–†–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç"):

```python
# –ó–ê–ú–ï–ù–ò–¢–¨ –≠–¢–û–¢ –ö–û–î:
st.markdown("**üî§ –†–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç:**")
st.code(result["text"], language="text")

# –ù–ê –≠–¢–û–¢:
st.markdown("**üî§ –†–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç:**")

# –ü–†–ê–í–ò–õ–¨–ù–ê–Ø –û–ë–†–ê–ë–û–¢–ö–ê JSON –ò HTML –¢–ê–ë–õ–ò–¶
if is_dots_ocr_json_response(result["text"]):
    # –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º JSON –≤ HTML —Ç–∞–±–ª–∏—Ü—É
    html_table = convert_dots_ocr_json_to_html_table(result["text"])
    st.markdown("üìä **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è (—Ç–∞–±–ª–∏—Ü–∞):**")
    st.markdown(html_table, unsafe_allow_html=True)
    st.success("‚úÖ JSON –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω –≤ —Ç–∞–±–ª–∏—Ü—É")
    
    # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π JSON –≤ —Å–≤–µ—Ä–Ω—É—Ç–æ–º –≤–∏–¥–µ
    with st.expander("üîç –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π JSON"):
        st.code(result["text"], language="json")
else:
    # –û–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç
    st.code(result["text"], language="text")
```

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 3: –î–æ–±–∞–≤–∏—Ç—å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é BBOX

–ü–æ—Å–ª–µ –±–ª–æ–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞, –¥–æ–±–∞–≤–∏—Ç—å:

```python
st.divider()

# –î–û–ë–ê–í–ò–¢–¨ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é BBOX –µ—Å–ª–∏ –µ—Å—Ç—å
if hasattr(st.session_state, 'last_ocr_result'):
    display_bbox_visualization_improved(st.session_state.last_ocr_result)
```

---

## üö¶ –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### –®–∞–≥ 1: –û—Ç–∫—Ä—ã—Ç—å app.py
```bash
cd ~/chatvlmllm
nano app.py  # –∏–ª–∏ –≤–∞—à –ª—é–±–∏–º—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä
```

### –®–∞–≥ 2: –ù–∞–π—Ç–∏ –±–ª–æ–∫ OCR –æ–±—Ä–∞–±–æ—Ç–∫–∏
–ò—Å–∫–∞—Ç—å: `st.session_state.ocr_result = {`

–≠—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ–∫–æ–ª–æ —Å—Ç—Ä–æ–∫–∏ 730-740.

### –®–∞–≥ 3: –î–æ–±–∞–≤–∏—Ç—å –∫–æ–¥ –ø–æ—Å–ª–µ st.session_state.ocr_result = {...}

–í—Å—Ç–∞–≤–∏—Ç—å –∫–æ–¥ –∏–∑ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è 1** –≤—ã—à–µ.

### –®–∞–≥ 4: –ù–∞–π—Ç–∏ –±–ª–æ–∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
–ò—Å–∫–∞—Ç—å: `st.markdown("**üî§ –†–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç:**")`

–≠—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ–∫–æ–ª–æ —Å—Ç—Ä–æ–∫–∏ 770-780.

### –®–∞–≥ 5: –ó–∞–º–µ–Ω–∏—Ç—å –±–ª–æ–∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è

–ó–∞–º–µ–Ω–∏—Ç—å `st.code(result["text"], language="text")` –Ω–∞ –∫–æ–¥ –∏–∑ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è 2**.

### –®–∞–≥ 6: –î–æ–±–∞–≤–∏—Ç—å BBOX –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é

–ü–æ—Å–ª–µ –±–ª–æ–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–¥ –∏–∑ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è 3**.

### –®–∞–≥ 7: –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å

```bash
# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ñ–∞–π–ª (Ctrl+O –≤ nano)
# –í—ã–π—Ç–∏ (Ctrl+X –≤ nano)

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Streamlit
# –ï—Å–ª–∏ –∑–∞–ø—É—â–µ–Ω–æ –≤ Docker:
docker-compose restart

# –ï—Å–ª–∏ –∑–∞–ø—É—â–µ–Ω–æ –ª–æ–∫–∞–ª—å–Ω–æ:
# –ü—Ä–æ—Å—Ç–æ –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ (F5)
```

---

## ‚úÖ –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

### –í OCR —Ä–µ–∂–∏–º–µ:
1. ‚úÖ JSON –æ—Ç–≤–µ—Ç—ã –æ—Ç `dots.ocr` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ HTML —Ç–∞–±–ª–∏—Ü—ã
2. ‚úÖ –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è BBOX –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–º–∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏
3. ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
4. ‚úÖ –õ–µ–≥–µ–Ω–¥–∞ —Å —Ü–≤–µ—Ç–∞–º–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π

### –í —Ä–µ–∂–∏–º–µ —á–∞—Ç–∞:
1. ‚úÖ JSON –æ—Ç–≤–µ—Ç—ã –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
2. ‚úÖ BBOX –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤
3. ‚úÖ –ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## üìù –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è 1: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã dots.ocr

–î–ª—è –ª—É—á—à–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ —Ä–µ–∂–∏–º–µ —á–∞—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
- üîç **–ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å BBOX** - –ø–æ–ª—É—á–∏—Ç–µ JSON —Å–æ –≤—Å–µ–º–∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏
- üñºÔ∏è **–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** - –Ω–∞–π–¥–∏—Ç–µ –ø–µ—á–∞—Ç–∏, –ø–æ–¥–ø–∏—Å–∏, –ª–æ–≥–æ—Ç–∏–ø—ã
- üìä **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã** - –ø–æ–ª—É—á–∏—Ç–µ HTML —Ç–∞–±–ª–∏—Ü—ã

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –º–æ–¥–µ–ª—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ:
```json
[
  {
    "bbox": [x1, y1, x2, y2],
    "category": "Text",
    "text": "–ö–æ–Ω—Ç–µ–Ω—Ç"
  }
]
```

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è 3: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ vLLM —Ä–µ–∂–∏–º

–î–ª—è –±–æ–ª–µ–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ vLLM —Ä–µ–∂–∏–º:
- ‚úÖ –í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã
- ‚úÖ –õ—É—á—à–µ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é

---

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º–∞: JSON –≤—Å–µ –µ—â–µ –Ω–µ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
1. –î–æ–±–∞–≤–ª–µ–Ω—ã –ª–∏ –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ –Ω–∞—á–∞–ª–æ app.py?
   - `is_dots_ocr_json_response()`
   - `convert_dots_ocr_json_to_html_table()`
   - `render_message_with_json_and_html_tables()`

2. –û–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ?

### –ü—Ä–æ–±–ª–µ–º–∞: BBOX –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
1. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –ª–∏ `image` –≤ `st.session_state.ocr_result['image']`?
2. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –ª–∏ `prompt_info` —Å `bbox_enabled: True`?
3. –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã –ª–∏ –¥–∞–Ω–Ω—ã–µ –≤ `st.session_state.last_ocr_result`?

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ JSON

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
1. –í–µ—Ä–Ω—É–ª–∞ –ª–∏ –º–æ–¥–µ–ª—å JSON –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ?
2. –ù–µ—Ç –ª–∏ –ª–∏—à–Ω–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤ –¥–æ/–ø–æ—Å–ª–µ JSON?
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã dots.ocr –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞.

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

### –ü—Ä–æ–≤–µ—Ä–∫–∞ OCR —Ä–µ–∂–∏–º–∞:
```bash
1. –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞
2. –í—ã–±—Ä–∞—Ç—å dots.ocr –º–æ–¥–µ–ª—å
3. –ù–∞–∂–∞—Ç—å "–ò–∑–≤–ª–µ—á—å —Ç–µ–∫—Å—Ç"
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ:
   ‚úÖ JSON –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –≤ —Ç–∞–±–ª–∏—Ü—É
   ‚úÖ –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è BBOX –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
   ‚úÖ –ï—Å—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –ª–µ–≥–µ–Ω–¥–∞
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∂–∏–º–∞ —á–∞—Ç–∞:
```bash
1. –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
2. –í—ã–±—Ä–∞—Ç—å dots.ocr
3. –ù–∞–∂–∞—Ç—å "üîç –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å BBOX"
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å:
   ‚úÖ JSON –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –≤ —Ç–∞–±–ª–∏—Ü—É –≤ —á–∞—Ç–µ
   ‚úÖ –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è BBOX –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
   ‚úÖ –ú–æ–∂–Ω–æ –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é
```

---

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —ç—Ç–∏—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

1. ‚úÖ **OCR —Ä–µ–∂–∏–º** - JSON –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü—ã
2. ‚úÖ **BBOX –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è** - —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –æ–±–æ–∏—Ö —Ä–µ–∂–∏–º–∞—Ö
3. ‚úÖ **–†–µ–∂–∏–º —á–∞—Ç–∞** - –ø–æ–ª–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤

–í–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ dots.ocr! üéâ

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2026-01-25  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–ê–≤—Ç–æ—Ä:** Claude + OlegKarenkikh  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é